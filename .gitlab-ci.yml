image: node:8.4.0

stages:
  - build
  - test

cache:
  key: yarn_cache
  paths:
    - .yarn_cache

build_script:
  stage: build
  script:
    - npm install yarn
    - yarn install --cache-folder ./.yarn_cache

test_script:
  stage: test
  dependencies:
    - build_script
  script:
    - yarn test -- --ci --runInBand
